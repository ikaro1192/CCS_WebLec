# クラスと関数

## 今回の目標

## 関数
Pythonも多くの言語のように関数が定義できる。
たとえば、二乗をする関数squareを実装してみよう。

```
def square(a):
    return a**2

print(square(3))
```

defを用いることで関数を定義できる。
また、引数の型は特に指定する必要がない。
「:」をつけるのを忘れないように。
関数のスコープは例にもれずインデントで決まる。

## ルーティング
今までは"/"に対するアクセスのみを扱ってきた。
しかし"/main"のように"/"以外のところにアクセスさせたいこともあるだろう。
あるいは"/user/taromaru"のようにユーザ固有のページをURLで分類したいようなこともある。
それを実現するのがFlaskのルーティング機能だ。

```
#!/usr/bin/python3
# -*- coding: utf-8 -*-

from flask import Flask
app = Flask(__name__)

@app.route('/')
def index():
    return 'Index Page'

@app.route('/hello')
def hello():
    return 'Hello World'

if __name__ == "__main__":
    app.run(debug=True)
```

これを実行して「http://127.0.0.1:5000/」、「http://127.0.0.1:5000/hello」
それぞれにアクセスしてほしい。
ちゃんと違うページが表示されたかと思う。
このように関数定義の前に

```
@app.route('ルーティングしたいURL')
```

としてあげることで、そのURLが仕丁されたとき、
@app.routeの直後にある関数が呼ばれるようになる。
ちなみにこの@から始まるものは*デコレータ*とよばれ、
関数に作用させることで使うことができる。
本講座では詳細には立ち入らないが名前ぐらいは知っておくと良いだろう。

つぎは先ほどだした"/user/taromaru"ようなURLに変数を入れるようなものを
実装してみよう。
といってもとても簡単にできる。

```
#!/usr/bin/python3
# -*- coding: utf-8 -*-

from flask import Flask
app = Flask(__name__)

@app.route('/user/<username>')
def show_user_profile(username):
    return 'User %s' % username

if __name__ == "__main__":
    app.run(debug=True)
```

これを実行し http://127.0.0.1:5000/user/taromaru にアクセスすると
ちゃんといい感じに表示される。taromaruの部分をいじって遊んで見てほしい。

このようにURLのうち変数にしたい部分を「<>」で囲み、
デコレートされる関数の引数としてその名前を指定すればいいだけだ。


## クラス
Pythonにおいてすべてはオブジェクトである。
そして、オブジェクトの設計図を定義する文法がクラスである。
たとえば、人を表すPersonクラスを実装してみよう。

```
class Person:
    def __init__(self, name, age)
        self.name=name
        self.age=age

    def show_info(self):
        print("name:"+name+" age:"+str(age))

gates = Person("Gates", 59)

gates.show_info()
print(gates.name)
```

classもインデントによるスコープだ。
Pythonのクラスには属性が定義でき、クラスから創りだしたオブジェクト(インスタンス、ここではgates)はその属性に「.」を用いてアクセスできる。
属性は細かく分けるとデータ属性およびメソッドがある。
平たく行ってしまえば、データ属性、メソッドはそれぞれ同じインスタンスで共有される変数と関数という認識で問題ない。
ここでPersonクラスには下記4つの属性が定義されている。
メソッドとして__init__、show_info、データ属性としてnameとageだ。
各メソッドの第一引数についているselfというものが気になった人がいるかもしれない。
このselfにはインスタンス自身が自動的にはいって渡される(したがって、メソッドを使う側は特に指定しなくても良い)
selfをつかうことでインスタンスのデータ属性などを書き換えることができる。
selfを指定しないでメソッド内で変数にアクセスするとそれはローカル変数が作られてしまうだけなので注意する必要がある。
また__init__メソッドは特殊なメソッドであり、インスタンスを生成するときに呼び出される。
__init__ メソッド内で変数の初期化などをすると良いだろう。また、インスタンスを生成する文法は
Personクラスの場合は

```
gates = Person("Gates", 59)
```

であり一般に


```
インスタンス名 = クラス名(__init__で指定した引数....)
```
という文法となる。

## None
Pythonには「値がないことを示す値」Noneが存在する。

### ダックタイピング



## 問題
* 次のようにディクショナリでIDとパスワードが与えられる。
http://127.0.0.1:5000/login?id=hoge?pass=foo のようなURLに対してアクセスが来た際、
